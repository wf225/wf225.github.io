---
layout: post
category: aws
title: "Build a simple website on AWS"
date: 2017-05-25 09:18:14 +0800
tagline: by Snail
tags: [aws, lambda]
author: Bill Wu
comments: true
---
Build a simple website with AWS S3 + Lamada Function + API Gateway

<!--more-->

## [AWS Command Line Interface](http://docs.aws.amazon.com/cli/latest/userguide/cli-chap-welcome.html)
The AWS Command Line Interface is a unified tool to manage your AWS services. With just one tool to download and configure, you can control multiple AWS services from the command line and automate them through scripts.

  - [Installing the AWS Command Line Interface](http://docs.aws.amazon.com/cli/latest/userguide/installing.html)  
    For macos, recommend to use homebrew install it.
    ```
    brew install awscli
    ```

    Verify that the AWS CLI installed correctly by running
    ```
    $ aws --version
    aws-cli/1.11.44 Python/3.4.3 Linux/4.4.0-59-generic botocore/1.5.7
    ```

  - [Configuring the AWS CLI](http://docs.aws.amazon.com/cli/latest/userguide/cli-chap-getting-started.html)
    ```
    $ aws configure
    AWS Access Key ID [None]: AKIAIOSFODNN7EXAMPLE
    AWS Secret Access Key [None]: wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
    Default region name [None]: us-west-2
    Default output format [None]: ENTER
    ```

  - Configuration and Credential Files  
    The CLI stores credentials specified with aws configure in a local file named credentials in a folder named .aws in your home directory. 
    The files generated by the CLI for the profile configured in the previous section look like this:  

    **~/.aws/credentials**
    ```
    [default]
    aws_access_key_id=AKIAIOSFODNN7EXAMPLE
    aws_secret_access_key=wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY    
    ```
    
    **~/.aws/config**
    ```
    [default]
    region=us-west-2
    output=json    
    ```

- - -

## [Access Keys](http://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_access-keys.html)
  To create, modify, or delete a user's access keys
  1. Sign in to the IAM console at [https://console.aws.amazon.com/iam/](https://console.aws.amazon.com/iam/).
  1. In the navigation pane, choose Users.
  1. Choose the name of the desired user, and then choose the Security Credentials tab.
  1. To create an access key, choose Create Access Key and then choose Download Credentials to save the access key ID and secret access key to a CSV file on your computer.

- - -
<a id="anchor_sdk"></a>

## [AWS SDK for JavaScript](http://docs.aws.amazon.com/sdk-for-javascript/v2/developer-guide/welcome.html)

  - [Installing the SDK for JavaScript](http://docs.aws.amazon.com/sdk-for-javascript/v2/developer-guide/installing-jssdk.html)
    ```
    npm install aws-sdk
    ```

  - [Working with Services in the SDK for JavaScript](http://docs.aws.amazon.com/sdk-for-javascript/v2/developer-guide/working-with-services.html)
  ![](/assets/img/aws/request-response.png)

  - [**Examples: AWS SDK for JavaScript**](http://docs.aws.amazon.com/sdk-for-javascript/v2/developer-guide/sdk-code-samples.html)

- - -
<a id="anchor_s3"></a>

## [Amazon S3](http://docs.aws.amazon.com/AmazonS3/latest/dev/Welcome.html)
  - [Amazon S3 Concepts](http://docs.aws.amazon.com/AmazonS3/latest/dev/Introduction.html#CoreConcepts)

  - [Using s3 Commands with the AWS Command Line Interface](http://docs.aws.amazon.com/cli/latest/userguide/using-s3-commands.html)

  - [Hosting a Static Website on Amazon S3](http://docs.aws.amazon.com/AmazonS3/latest/dev/WebsiteHosting.html)
    - [Configure a Bucket for Website Hosting](http://docs.aws.amazon.com/AmazonS3/latest/dev/HowDoIWebsiteConfiguration.html)

- - -
<a id="anchor_dynamodb"></a>

## [Amazon DynamoDB](http://docs.aws.amazon.com/amazondynamodb/latest/developerguide/Introduction.html)
  - [DynamoDB Concepts](http://docs.aws.amazon.com/amazondynamodb/latest/gettingstartedguide/quick-intro.html)  
    ![](/assets/img/aws/dynamo-partition.png)

  - Running DynamoDB on Your Computer: 
    1. [Download DynamoDB](http://docs.aws.amazon.com/amazondynamodb/latest/gettingstartedguide/GettingStarted.Download.html).
    
    2. Extract the contents of the downloaded archive and copy the extracted directory to a location of your choice.

    3. To start DynamoDB, open a command prompt window, navigate to the directory where you extracted DynamoDBLocal.jar, and enter the following command:
    ```
    cd c:\aws
    java -Djava.library.path=./DynamoDBLocal_lib -jar DynamoDBLocal.jar -sharedDb -inMemory
    ```

  - [Setting Up DynamoDB (Local & Web Service)](http://docs.aws.amazon.com/amazondynamodb/latest/developerguide/SettingUp.html)

  - [DynamoDB Actions](http://docs.aws.amazon.com/amazondynamodb/latest/APIReference/API_Operations.html)

  - [DynamoDB Data Types](http://docs.aws.amazon.com/amazondynamodb/latest/APIReference/API_Types.html)
    - [AttributeDefinition](http://docs.aws.amazon.com/zh_cn/amazondynamodb/latest/APIReference/API_AttributeDefinition.html)
    
    - [AttributeValue](http://docs.aws.amazon.com/zh_cn/amazondynamodb/latest/APIReference/API_AttributeValue.html)

  - [**Examples: Develop DynamoDB with Node.js**](http://docs.aws.amazon.com/amazondynamodb/latest/gettingstartedguide/GettingStarted.NodeJs.html)

- - -
<a id="anchor_lamada"></a>

## [AWS Lamada](http://docs.aws.amazon.com/lambda/latest/dg/welcome.html)
  - AWS Lambda is a compute service that lets you run code without provisioning or managing servers. AWS Lambda executes your code only when needed and scales automatically, from a few requests per day to thousands per second. You pay only for the compute time you consume - there is no charge when your code is not running.

  - [Create a HelloWorld Lambda Function](http://docs.aws.amazon.com/lambda/latest/dg/getting-started-create-function.html)
  
  - [Using AWS Lambda with Amazon S3](http://docs.aws.amazon.com/lambda/latest/dg/with-s3.html)  
    ![](/assets/img/aws/push-s3-example-10.png)

  - [Using AWS Lambda with Amazon API Gateway](http://docs.aws.amazon.com/lambda/latest/dg/with-on-demand-https-example.html)  
    ![](/assets/img/aws/APIGateway_Diagram.png)

- - -
<a id="anchor_apigateway"></a>

## [Amazon API Gateway](http://docs.aws.amazon.com/apigateway/latest/developerguide/welcome.html)
  - [API Gateway Concepts](http://docs.aws.amazon.com/apigateway/latest/developerguide/api-gateway-basic-concept.html)

  - [Create an API Gateway API from an Example](http://docs.aws.amazon.com/apigateway/latest/developerguide/api-gateway-create-api-from-example.html)

  - [Build an API to Expose a Lambda Function](http://docs.aws.amazon.com/apigateway/latest/developerguide/getting-started.html)

  - [Create an API Using Amazon API Gateway with CLI](http://docs.aws.amazon.com/lambda/latest/dg/with-on-demand-https-example-configure-event-source.html)

  - [Create an API with Lambda Proxy Integration through a Proxy Resource](http://docs.aws.amazon.com/apigateway/latest/developerguide/api-gateway-create-api-as-simple-proxy-for-lambda.html#api-gateway-proxy-integration-lambda-function-nodejs)

- - -
<a id="anchor_serverless"></a>

## [Serverless](https://github.com/serverless/serverless)
  - The Serverless Framework helps you develop and deploy your AWS Lambda functions.
  - You can start from [**Lambda + Serverless Tutorial video**](https://www.youtube.com/watch?v=71cd5XerKss).  
    Or you can start from [Quick Start](https://github.com/serverless/serverless#quick-start).

  - Advanced

    - [User Guide - Functions](https://serverless.com/framework/docs/providers/aws/guide/functions/s)

    - [User Guide - Events](https://serverless.com/framework/docs/providers/aws/guide/events/)

    - [User Guide - Resources](https://serverless.com/framework/docs/providers/aws/guide/resources/)

    - [User Guide - Packaging](https://serverless.com/framework/docs/providers/aws/guide/packaging/)

  - [Deploying](https://serverless.com/framework/docs/providers/aws/guide/deploying/)
    ```
    serverless deploy
    ```

    Deploy Function, this method is much faster, since it does not rely on CloudFormation.
    ```
    serverless deploy function --function myFunction
    ```

  - Common commands
    ```
    config ........................ Configure Serverless
    config credentials ............ Configures a new provider profile for the Serverless Framework
    create ........................ Create new Serverless service
    install ....................... Install a Serverless service from GitHub
    package ....................... Packages a Serverless service
    package function .............. undefined
    deploy ........................ Deploy a Serverless service
    deploy function ............... Deploy a single function from the service
    deploy list ................... List deployed version of your Serverless Service
    invoke ........................ Invoke a deployed function
    invoke local .................. Invoke function locally
    info .......................... Display information about the service
    logs .......................... Output the logs of a deployed function
    metrics ....................... Show metrics for a specific function
    remove ........................ Remove Serverless service and all resources
    rollback ...................... Rollback the Serverless service to a specific deployment
    slstats ....................... Enable or disable stats
    ```

- - -

## CloudFormation
- [What is AWS CloudFormation?](http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/Welcome.html)  
  AWS CloudFormation is a service that helps you model and set up your Amazon Web Services resources so that you can spend less time managing those resources and more time focusing on your applications that run in AWS.

- [How Does AWS CloudFormation Work?](http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/cfn-whatis-howdoesitwork.html)  
![](/assets/img/aws/create-stack-diagram.png)

- [Working with Stacks Using the AWS CLI](http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/cfn-using-cli.html)

  - Example 1: [Uploading Local Artifacts to an S3 Bucket](http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-cli-package.html)
  ```
  aws cloudformation package --template-file example.yaml --output-template-file serverless-output.yaml --s3-bucket <your-bucket-name>
  ```

  - Example 2: deploy
  ```
  aws cloudformation deploy --template-file serverless-output.yaml --stack-name <your-stack-name> --capabilities CAPABILITY_IAM
  ```

- [AWS Resource Types Reference](http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-template-resource-type-ref.html)
